{
  "steps": [
    {
      "type": "read_files",
      "config": {
        "path": "{{project_idea}}",
        "contents_key": "project_idea_content"
      }
    },
    {
      "type": "llm_generate",
      "config": {
        "prompt": "# Task\n\nExtract a list of context and reference files from the project idea:\n\n- Project Idea:\n  <PROJECT_IDEA>\n  {{project_idea_content}}\n  </PROJECT_IDEA>\n- Context Files: These files provide context for the project idea, such as vision documents or design philosophies.\n- Reference Files: These files are referenced in the project idea, such as library documentation or code files.\n\n# Output Format\n\nThe output should be a JSON file with two keys:\n- context_files: A list of file paths for context files.\n- reference_files: A list of file paths for reference files.",
        "model": "{{model|default:'openai/gpt-4o'}}",
        "output_format": "files",
        "output_key": "extracted_file_lists"
      }
    },
    {
      "type": "execute_recipe",
      "config": {
        "recipe_path": "recipes/blueprint_generator/recipes/generate_project_spec.json",
        "context_overrides": {
          "project_idea": "{{project_idea}}",
          "context_files": "{{extracted_file_lists.files[0]['content']}}",
          "reference_files": "{{extracted_file_lists.files[0]['content']}}",
          "output_root": "{{output_root|default:'output'}}",
          "model": "{{model|default:'openai/gpt-4o'}}"
        }
      }
    }
  ]
}
